# ~/.bash_aliases_win

# vim/editor stuff
_qtnvim='/c/Users/zdkohler/devel/Neovim/bin/nvim-qt.exe'
_nvim='/c/Users/zdkohler/devel/Neovim/bin/nvim.exe'
alias vim="winpty --mouse $_nvim"
export VISUAL="winpty --mouse $_nvim"
# alias vim=$_qtnvim
# export VISUAL=$_qtnvim
if [ "$TERM" == "cygwin" ]; then
    alias vim='/usr/bin/vim'
    export VISUAL='vim'
    export EDITOR="/usr/bin/vim"
else
    export EDITOR="$VISUAL"

fi
export COLORTERM=256


# these must be before the following check for interactivity:
alias jpy="jupyter notebook ~/devel/ipynb/"
alias flaskdebug='echo "Starting Flask..."; FLASK_APP=virtcom.http FLASK_DEBUG=1 python $pythonroot/Scripts/flask-script.py run -h 0.0.0.0 -p 8000'
alias ipython="winpty ipython"
alias python="winpty python"
alias cc='python -m coopercondadeploy.bin.cooperconda'
alias mru=$'awk \'/^> /{ sub("~", ENVIRON["HOME"]); print substr($0, 3) }\' ~/.viminfo | xargs realpath -eqP --relative-base=.'

export TF_2015='/c/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/tf.exe'
export TF_2017='/c/Program Files (x86)/Microsoft Visual Studio/2017/Enterprise/Common7/IDE/CommonExtensions/Microsoft/TeamFoundation/Team Explorer/TF.exe'

alias tf="echo tf.exe not at one of the locations configured in .bash_aliases_win"
"$TF_2015" > /dev/null 2>&1  && alias tf="'$TF_2015'"
"$TF_2017" > /dev/null 2>&1  && alias tf="'$TF_2017'"
alias tfpt="'/c/Program Files (x86)/Microsoft Team Foundation Server 2012 Power Tools/TFPT.EXE'"

# 2018-03-26
# workaround for msys2 envsubst.exe bug
# https://github.com/Alexpux/MSYS2-packages/issues/735
alias git="PATH=/usr/bin git"

function rmtag () {
git tag -d $1 && git push --delete origin $1
}

function tmuxsession () {
    FILE=tmux.session
    if [ -f $FILE ]; then
        windowtitle="${PWD##*/} tmuxsession"
        PS1=""
        # PS1="\e]0;$windowtitle\a\n$"
        echo -ne "\e]0;$windowtitle\a"
        tmux new-session "bash -c '. $FILE'"
    else
        tmux
    fi
}
